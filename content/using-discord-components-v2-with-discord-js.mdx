---
title: "How to use Discord Components v2 with Discord.js"
description: "Learn how to use Discord Components v2 with Discord.js to create interactive and dynamic user interfaces for your Discord bots."
date:
  created: "2025-06-01"
  updated: "2025-06-03"
author:
  name: BestCodes
image:
  url: /image/blog/discord-components-v2-with-discord-js-thumbnail.png
  alt: "An image with the text 'Discord Components v2' in the top left and a blurred background."
  fit: contain
tags:
  - tutorial
  - discord
  - javascript
  - discord.js
---

> This article assumes you have a basic understanding of JavaScript and Discord.js.

In March 2025, Discord released Components v2, a great improvement to the message components system. Before Components v2, you could send embeds or text content, but you had very little control over the layout. With the new Components v2, messages are constructed entirely using components. This unified approach eliminates the use of traditional message content and embeds, offering developers greater flexibility in designing message layouts.

Rather than describe to you everything that Discord Components v2 offers, let's learn by example. We'll create a simple bot on Discord using the [Discraft](https://github.com/The-Best-Codes/discraft) bot framework to skip the boilerplate code and focus on the components.

## Creating a Bot

> If you already have a JS Discord bot, you can skip directly to the [Components v2 with Discord.js](#components-v2-with-discordjs) section.

First, install the Discraft CLI globally (or skip this step and run it with `npx`). To do this, run:

```bash
npm install -g discraft
```

In this tutorial, we are using Discraft `1.7.7`.
Next, let's initialize a new JavaScript bot using Discraft:

```bash
discraft init
```

Choose the "JavaScript" template when prompted. You can pick any directory name you want (e.g., `components-v2-bot`) by selecting "Custom directory" and typing the desired name.
By the end of this process, you should see some steps like this:

- cd components-v2-bot
- Configure your .env file with your bot token
- `npm run dev` to start the bot in development mode

Follow the instructions to complete the setup process.
Your `.env` file should contain the bot token and ID, which you can obtain after creating a new application on the [Discord Developer Portal](https://discord.com/developers/applications). You should **never share your bot token**.

```bash
cd components-v2-bot
```

```dotenv
# Create a .env file with this content
# From `Bot > Token` | https://discord.com/developers/applications
DISCORD_TOKEN='secret_token_here'
# From `General Information > App ID` | https://discord.com/developers/applications
DISCORD_APP_ID='bot_id_here'
```

```bash
npm run dev
```

You should see a message from the terminal that your bot is online! You can fill in your bot client ID below to get an invite link that you can use to invite the bot to a server:

<DiscordBotInvite />

Note that you should set application command and bot scopes in the Discord Developer Portal before inviting the bot to a server.

### Understanding the Bot Structure

The Discraft JavaScript template automatically created a lot of stuff for us, so let's make sure we understand what's going on.
If we open the project in a code editor, we'll see a lot of directories and files, but for this tutorial, the `commands` directory is the most important. The `index.js` file is the entry point for the bot, where all the other files come together. If you have run `npm run dev` or `npm run build`, you will also find a `.discraft` folder. It contains command and event index files to automatically register commands and events with Discord when your bot starts up.

![Discraft JavaScript Template Structure](/image/blog/using-discord-js-cv2/discraft-js-directories.png)

Let's take a look at the `commands/ping.js` file. The file defines a bot command (`/ping`) that responds with "Pong!" when a user runs the command on Discord.

```javascript
import { SlashCommandBuilder } from "discord.js";

export default {
  data: new SlashCommandBuilder().setName("ping").setDescription("Ping!"),

  async execute(data) {
    const interaction = data.interaction;
    await interaction.reply("Pong!");
  },
};
```

When the bot starts, it will register a `ping` slash command on Discord. If we type `/` in the Discord message box, we'll see a list of bot commands we can run. This image shows what part of the code corresponds to different parts of the Discord command UI:

![Ping Command UI](/image/blog/using-discord-js-cv2/ping-command-demo.png)

Now that we understand how the slash commands are defined, let's update the ping command to use Components v2!

## Components v2 with Discord.js

> Components v2 was recently introduced into Discord.js. This tutorial assumes you are using Discord.js `14.19.3` or later. To make sure you have the latest version, run `npm install discord.js@latest` in your project directory.

The first step in migrating to Components v2 is to add the `IsComponentsV2` flag to our bot interaction response. This flag tells Discord.js to use Components v2 instead of the older version.

```javascript
import { MessageFlags } from "discord.js";

// ...

await interaction.reply({
  content: "Pong!",
  flags: MessageFlags.IsComponentsV2,
});
```

If we try to use the ping command at this point, nothing will happen (or the bot will have an error) because we need an array of components to pass to the `content` field and not plain text. So let's update our file again:

```javascript
import {
  MessageFlags,
  SlashCommandBuilder,
  TextDisplayBuilder,
} from "discord.js";

export default {
  data: new SlashCommandBuilder().setName("ping").setDescription("Ping!"),

  async execute(data) {
    const interaction = data.interaction;

    const components = [new TextDisplayBuilder().setContent("Pong!")];

    await interaction.reply({
      components: components,
      flags: MessageFlags.IsComponentsV2,
    });
  },
};
```

Seems pretty boring. It does the same thing as our ping command earlier, but with more code. However, you might have noticed something really cool: the `components` constant is an array. We can put text, buttons, or whatever we want in whatever order we want. We are no longer limited to just putting embeds or action rows at the end of our messages! Let's try this with some more components:

```javascript
import {
  ContainerBuilder,
  MessageFlags,
  SeparatorBuilder,
  SeparatorSpacingSize,
  SlashCommandBuilder,
  TextDisplayBuilder,
} from "discord.js";

export default {
  data: new SlashCommandBuilder().setName("ping").setDescription("Ping!"),

  async execute(data) {
    const interaction = data.interaction;

    const components = [
      new TextDisplayBuilder().setContent("Pinging..."),
      new ContainerBuilder().addTextDisplayComponents(
        new TextDisplayBuilder().setContent("Ping? Pong? Ping?"),
      ),
      new SeparatorBuilder()
        .setSpacing(SeparatorSpacingSize.Small)
        .setDivider(true),
      new TextDisplayBuilder().setContent("Pong!"),
    ];

    await interaction.reply({
      components: components,
      flags: MessageFlags.IsComponentsV2,
    });
  },
};
```

![Fancy Ping](/image/blog/using-discord-js-cv2/fancy-ping.png)

If you want an awesome tool for building Discord messages with Components v2, check out [discord.builders](https://discord.builders/discordjs-javascript-code-generator).

<OutboundLink
  className="not-prose"
  target="_blank"
  href="https://discord.builders/discordjs-javascript-code-generator"
>
  <Button>Open discord.builders For Discord.js</Button>
</OutboundLink>

---

Hmm, what else can we do... let's try recreating that select menu you see in the thumbnail of this blog post!

First, make a new file in `commands/` named `select-menu.js`. We can put this content in it:

```javascript
import {
  ActionRowBuilder,
  MessageFlags,
  SlashCommandBuilder,
  StringSelectMenuBuilder,
  StringSelectMenuOptionBuilder,
  TextDisplayBuilder,
} from "discord.js";

export default {
  data: new SlashCommandBuilder()
    .setName("select-food")
    .setDescription("Choose a food to eat :D"),

  async execute(data) {
    const interaction = data.interaction;

    const components = [
      new TextDisplayBuilder().setContent("Which food would you like to eat?"),
      new ActionRowBuilder().addComponents(
        new StringSelectMenuBuilder()
          .setCustomId("discraft-select-a-food")
          .setPlaceholder("Make a selection")
          .addOptions(
            new StringSelectMenuOptionBuilder()
              .setLabel("Taco")
              .setValue("dsaf-taco")
              .setDescription("(best option)")
              .setEmoji({
                name: "üåÆ",
              }),
            new StringSelectMenuOptionBuilder()
              .setLabel("Pizza")
              .setValue("dsaf-pizza")
              .setEmoji({
                name: "üçï",
              }),
            new StringSelectMenuOptionBuilder()
              .setLabel("Burger")
              .setValue("dsaf-burger")
              .setEmoji({
                name: "üçî",
              }),
          ),
      ),
    ];

    await interaction.reply({
      components: components,
      flags: MessageFlags.IsComponentsV2,
    });
  },
};
```

After you add a new command, save the file and restart your bot. If you are using the `npm run dev` command from Discraft, your bot will automatically reload for you. You might also need to refresh Discord for the command to appear.

Run the `select-food` command and you will see a select menu with options just like we set in the file!

![Select Food Menu](/image/blog/using-discord-js-cv2/taco-best-option.png)

The select menu interaction will fail if you actually make a selection, since the interaction is not handled by the bot yet. We can easily add an `interactionCreate` event listener and handle the select menu interactions.

```javascript
import { Events, MessageFlags } from "discord.js";
import { logger } from "../utils/logger";

export default {
  event: Events.InteractionCreate,
  handler: async (_client, interaction) => {
    if (!interaction.isAnySelectMenu()) return;

    if (interaction.customId === "discraft-select-a-food") {
      const selectedValue = interaction.values[0];

      let foodName = "";
      switch (selectedValue) {
        case "dsaf-taco":
          foodName = "Taco";
          break;
        case "dsaf-pizza":
          foodName = "Pizza";
          break;
        case "dsaf-burger":
          foodName = "Burger";
          break;
        default:
          foodName = "Unknown food";
      }

      try {
        await interaction.reply({
          content: `You selected: ${foodName}! Great choice!`,
          flags: MessageFlags.Ephemeral, // Only the user who interacted with the menu can see this message
        });
      } catch (error) {
        logger.error(`Error replying to select menu interaction: ${error}`);
      }
    }
  },
};
```

Now when you select a food, you will see a follow-up message!

![Food Selection Follow-up](/image/blog/using-discord-js-cv2/taco-selected.png)

## Conclusion

That's pretty much it! It's quite simple to migrate to Components v2 with Discord.js. You can see the list of available components on the Discord.js docs here:

https://discord.com/developers/docs/components/reference

Plus, [discord.builders](https://discord.builders/discordjs-javascript-code-generator) makes it super easy to mockup messages with Components v2.

Thanks for reading!
[BestCodes](https://bestcodes.dev)
